<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<title>بازی مجموعه‌ها</title>
<style>
    body {
        background: #0f0f0f;
        font-family: sans-serif;
        direction: rtl;
        color: white;
        overflow-x: hidden;
    }

    .cards {
        display: flex;
        gap: 10px;
        margin: 20px;
    }

    .card {
        width: 60px;
        height: 80px;
        background: rgba(255,255,255,0.2);
        backdrop-filter: blur(10px);
        border-radius: 12px;
        display: flex;
        justify-content: center;
        align-items: center;
        cursor: grab;
        box-shadow: 0 0 10px rgba(255,255,255,0.3);
        transition: 0.3s;
        font-size: 25px;
    }

    .card:active {
        cursor: grabbing;
    }

    .area {
        width: 220px;
        height: 160px;
        background: rgba(255,255,255,0.12);
        border: 2px dashed #fff;
        border-radius: 15px;
        margin: 25px;
        padding: 10px;
        transition: 0.3s;
    }

    /* ویبره */
    .shake {
        animation: shake 0.4s;
    }
    @keyframes shake {
        0% { transform: translate(0); }
        25% { transform: translate(-5px); }
        50% { transform: translate(5px); }
        75% { transform: translate(-5px); }
        100% { transform: translate(0); }
    }

    /* پیام بزرگ وسط صفحه */
    #bigMessage {
        position: fixed;
        top: 50%;
        right: 50%;
        transform: translate(50%, -50%);
        background: rgba(255,255,255,0.15);
        padding: 25px 40px;
        border-radius: 20px;
        font-size: 30px;
        text-align: center;
        display: none;
        animation: pop 0.5s;
        backdrop-filter: blur(12px);
    }

    @keyframes pop {
        0% { transform: translate(50%, -50%) scale(0.4); opacity: 0; }
        100% { transform: translate(50%, -50%) scale(1); opacity: 1; }
    }

</style>
</head>
<body>

<h2>مرحله ۱</h2>

<div class="cards" id="cards">
    <!-- NEW کارت‌ها -->
</div>

<div style="display:flex;gap:20px">
    <div class="area" id="A">A</div>
    <div class="area" id="B">B</div>
</div>

<div id="bigMessage"></div>

<script>
/* NEW کارت‌ها مطابق درخواست */
let cardNumbers = [1,2,3,3,4,5,5,5,6];

/* ساخت کارت‌ها */
const cardBox = document.getElementById("cards");
cardNumbers.forEach((num, index) => {
    let c = document.createElement("div");
    c.className = "card";
    c.innerText = num;
    c.draggable = true;
    c.id = "card" + index;
    cardBox.appendChild(c);
});

/* داده‌های مجموعه‌ها */
let setA = [];
let setB = [];

/* پیام بزرگ */
function showBig(msg) {
    let box = document.getElementById("bigMessage");
    box.innerText = msg;
    box.style.display = "block";
    setTimeout(()=> box.style.display="none", 1100);
}

/* زمانی که کارت رها می‌شود */
document.querySelectorAll(".card").forEach(card => {

    card.addEventListener("dragstart", e => {
        e.dataTransfer.setData("id", card.id);
    });
});

/* دراپ روی مجموعه‌ها */
document.querySelectorAll(".area").forEach(area => {

    area.addEventListener("dragover", e => e.preventDefault());

    area.addEventListener("drop", e => {

        let id = e.dataTransfer.getData("id");
        let card = document.getElementById(id);
        let value = parseInt(card.innerText);

        // بررسی مکان فعلی
        let targetSet = area.id === "A" ? setA : setB;

        // ۱ ـــــــــــ کارت قبلاً داخل این مجموعه بوده
        if (targetSet.includes(value)) {
            area.classList.add("shake");
            showBig("این عدد تکراریه!");
            setTimeout(()=> area.classList.remove("shake"), 400);
            return;
        }

        // ۲ ـــــــــــ اگر کارت مربوط به این مجموعه نبود (طبق شرط مثال شما: 3 ∈ A و 7 ∉ B)
        if (area.id === "A" && value !== 3) {
            area.classList.add("shake");
            showBig("دقت کن!");
            return;
        }
        if (area.id === "B" && value === 7) {
            area.classList.add("shake");
            showBig("دقت کن!");
            return;
        }

        // اگر همه‌چیز درست بود → اضافه کن
        targetSet.push(value);

        // انیمیشن محو شدن کارت
        card.style.transition = "0.5s";
        card.style.opacity = "0";
        card.style.transform = "translateY(20px)";
        setTimeout(() => card.remove(), 500);

        area.style.boxShadow = "0 0 15px lime";
        setTimeout(()=> area.style.boxShadow="none", 600);

    });

});
</script>

</body>
</html>
