<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8" />
<title>مرحله ۱ - عضویت در مجموعه</title>
<style>
 body {
   font-family: "Vazirmatn", sans-serif;
   background: #0d1117;
   color: #e6edf3;
   margin: 0;
   padding: 0;
   display: flex;
   flex-direction: column;
   align-items: center;
 }
 h1 {
   margin-top: 30px;
 }
 .panel {
   display: flex;
   gap: 20px;
   margin: 20px 0;
   font-size: 18px;
 }
 .sets-container {
   display: flex;
   gap: 20px;
   margin-top: 20px;
 }
 .set-box {
   background: rgba(255,255,255,0.06);
   border: 1px solid rgba(255,255,255,0.15);
   padding: 20px;
   border-radius: 16px;
   text-align: center;
   min-width: 200px;
   backdrop-filter: blur(6px);
 }
 .cards {
   display: flex;
   gap: 15px;
   margin-top: 30px;
 }
 .card {
   background: rgba(255,255,255,0.09);
   border: 1px solid rgba(255,255,255,0.15);
   padding: 20px 30px;
   border-radius: 40px;
   cursor: grab;
   font-size: 22px;
   transition: 0.25s;
 }
 .card:hover { transform: scale(1.08); }

 /* انیمیشن انتقال */
 .fly {
   position: absolute;
   transition: 0.7s ease;
   pointer-events: none;
 }

 #message {
   margin-top: 25px;
   font-size: 22px;
   min-height: 28px;
 }
</style>
</head>
<body>

<h1>مرحله ۱ — آزمایش عضویت در مجموعه</h1>

<div class="panel">
  <div>امتیاز: <span id="score">0</span></div>
  <div>خطاها: <span id="errors">0</span></div>
</div>

<!-- سه مجموعه بالا -->
<div class="sets-container">
  <div class="set-box" data-set="A">A = { 1 , 3 , 5 , 7 }</div>
  <div class="set-box" data-set="B">B = { 2 , 4 , 6 }</div>
  <div class="set-box" data-set="C">C = { 1 , 2 , 3 , 4 }</div>
</div>

<!-- کارت‌ها -->
<div class="cards">
  <div class="card" draggable="true" data-value="1">۱</div>
  <div class="card" draggable="true" data-value="2">۲</div>
  <div class="card" draggable="true" data-value="3">۳</div>
  <div class="card" draggable="true" data-value="4">۴</div>
  <div class="card" draggable="true" data-value="5">۵</div>
  <div class="card" draggable="true" data-value="7">۷</div>
</div>

<div id="message"></div>

<script>
const sets = {
  A: [1,3,5,7],
  B: [2,4,6],
  C: [1,2,3,4]
};

const scoreEl = document.getElementById("score");
const errorsEl = document.getElementById("errors");
const message = document.getElementById("message");
let score = 0;
let errors = 0;

// کارت‌ها
const cards = document.querySelectorAll('.card');
cards.forEach(card => {
  card.addEventListener('dragstart', e => {
    e.dataTransfer.setData("value", e.target.dataset.value);
    e.dataTransfer.setData("cardId", e.target.innerText);
  });
});

// مجموعه‌ها
const boxes = document.querySelectorAll('.set-box');
boxes.forEach(box => {
  box.addEventListener('dragover', e => e.preventDefault());

  box.addEventListener('drop', e => {
    e.preventDefault();
    const value = parseInt(e.dataTransfer.getData("value"));
    const setName = box.dataset.set;
    animateDrop(e, value, setName, box);
  });
});

// انیمیشن انتقال کارت
function animateDrop(e, value, setName, box){
  const temp = document.createElement("div");
  temp.className = "fly";
  temp.textContent = value;
  temp.style.left = e.pageX + "px";
  temp.style.top = e.pageY + "px";
  document.body.appendChild(temp);

  const rect = box.getBoundingClientRect();
  temp.style.left = rect.left + rect.width/2 + "px";
  temp.style.top = rect.top + rect.height/2 + "px";

  setTimeout(()=>{
    temp.remove();
    checkMembership(value, setName);
  },700);
}

// بررسی عضویت
function checkMembership(value, setName){
  if(sets[setName].includes(value)){
    score += 10;
    scoreEl.textContent = score;
    message.textContent = `${value} ∈ ${setName}`;
  } else {
    errors += 1;
    errorsEl.textContent = errors;
    message.textContent = `${value} ∉ ${setName}`;
  }
}
</script>

</body>
</html>
