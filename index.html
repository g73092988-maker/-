<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8" />
<title>بازی مجموعه‌ها</title>
<style>
  body { font-family: sans-serif; background:#f2f2f2; padding:20px; }
  .sets { display:flex; justify-content:space-around; margin-bottom:40px; }
  .set-box {
    width:180px; min-height:120px; background:#fff; padding:15px;
    border-radius:14px; box-shadow:0 4px 10px rgba(0,0,0,0.1);
    position:relative; transition:0.25s;
  }
  .set-box:hover { transform:translateY(-4px); }
  .set-title { font-weight:bold; margin-bottom:10px; }
  .drop-zone {
    min-height:40px; margin-top:10px; padding:8px;
    border-radius:10px; background:#e8e8e8;
    display:flex; flex-wrap:wrap; gap:8px;
    transition:0.3s ease;
  }

  .card-area {
    display:flex; justify-content:center; flex-wrap:wrap; gap:12px;
    margin-top:50px;
  }
  .card {
    width:55px; height:55px; background:white;
    border-radius:12px; box-shadow:0 3px 8px rgba(0,0,0,0.15);
    display:flex; justify-content:center; align-items:center;
    font-size:20px; cursor:pointer; user-select:none;
    transition:transform 0.2s ease, box-shadow 0.2s;
  }
  .card:hover {
    transform:translateY(-4px);
    box-shadow:0 5px 12px rgba(0,0,0,0.2);
  }

  /* افکت لرزش ملایم */
  .card:active {
    animation: shake 0.15s linear;
  }
  @keyframes shake {
    0% { transform:translateX(0); }
    25% { transform:translateX(-2px); }
    50% { transform:translateX(2px); }
    75% { transform:translateX(-2px); }
    100% { transform:translateX(0); }
  }

  /* انیمیشن انتقال کارت */
  .snap-animation {
    transition: transform 0.35s ease, top 0.35s ease, left 0.35s ease;
  }
</style>
</head>
<body>

<div class="sets">
  <div class="set-box" data-set="A">
    <div class="set-title">A = {1, 3, 5}</div>
    <div class="drop-zone" id="zoneA"></div>
  </div>
  <div class="set-box" data-set="B">
    <div class="set-title">B = {3, 4, 5}</div>
    <div class="drop-zone" id="zoneB"></div>
  </div>
  <div class="set-box" data-set="C">
    <div class="set-title">C = {2, 5, 6}</div>
    <div class="drop-zone" id="zoneC"></div>
  </div>
</div>

<div class="card-area" id="cardArea">
  <div class="card" draggable="true">1</div>
  <div class="card" draggable="true">2</div>
  <div class="card" draggable="true">3</div>
  <div class="card" draggable="true">3</div>
  <div class="card" draggable="true">5</div>
  <div class="card" draggable="true">5</div>
  <div class="card" draggable="true">4</div>
</div>

<script>
// سیستم درگ
let dragged = null;

const cards = document.querySelectorAll('.card');
cards.forEach(card => {
  card.addEventListener('dragstart', () => {
    dragged = card;
    setTimeout(() => card.style.opacity = "0.5", 0);
  });
  card.addEventListener('dragend', () => {
    card.style.opacity = "1";
  });
});

const dropZones = document.querySelectorAll('.drop-zone');
dropZones.forEach(zone => {
  zone.addEventListener('dragover', e => e.preventDefault());

  zone.addEventListener('drop', e => {
    e.preventDefault();

    const rect = zone.getBoundingClientRect();
    const x = rect.left;
    const y = rect.top;

    // انیمیشن انتقال
    dragged.classList.add('snap-animation');
    dragged.style.position = 'absolute';
    dragged.style.left = dragged.offsetLeft + 'px';
    dragged.style.top = dragged.offsetTop + 'px';

    setTimeout(() => {
      dragged.style.left = (rect.left + 10) + 'px';
      dragged.style.top = (rect.top + zone.children.length * 60 + 10) + 'px';
    }, 10);

    setTimeout(() => {
      dragged.classList.remove('snap-animation');
      dragged.style.position = '';
      zone.appendChild(dragged);
    }, 400);
  });
});
</script>

</body>
</html>
