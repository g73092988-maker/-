<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8" />
<title>Ù…Ø±Ø­Ù„Ù‡ Û± - Ø¹Ø¶ÙˆÛŒØª Ø¯Ø± Ù…Ø¬Ù…ÙˆØ¹Ù‡</title>
<style>
 body {
   font-family: "Vazirmatn", sans-serif;
   background: linear-gradient(180deg,#0b0f14,#0e141b,#0b0f14);
   color: #e6edf3;
   margin: 0;
   padding: 0;
   display: flex;
   flex-direction: column;
   align-items: center;
   backdrop-filter: blur(4px);
 }
 h1 { margin-top: 30px; }
 .panel { display: flex; gap: 20px; margin: 20px 0; font-size: 18px; }

 .sets-container { display: flex; gap: 20px; margin-top: 20px; }
 .set-box {
   background: rgba(255,255,255,0.07);
   border: 1px solid rgba(255,255,255,0.18);
   padding: 20px;
   border-radius: 20px;
   text-align: center;
   min-width: 200px;
   box-shadow: 0 0 15px rgba(0,0,0,0.3);
 }
 .glow-success {
   box-shadow: 0 0 20px #2ecc71 !important;
   transition: 0.4s ease;
 }

 .cards { display: flex; gap: 15px; margin-top: 30px; flex-wrap: wrap; max-width: 600px; justify-content:center; }
 .card {
   background: rgba(255,255,255,0.12);
   border: 1px solid rgba(255,255,255,0.18);
   padding: 20px 30px;
   border-radius: 40px;
   cursor: grab;
   font-size: 22px;
   transition: 0.25s;
   box-shadow: 0 4px 12px rgba(0,0,0,0.4);
   backdrop-filter: blur(6px);
 }
 .card:hover { transform: scale(1.09); }

 .fly { position: absolute; transition: 0.5s ease; pointer-events: none; font-size: 26px; }

 .placed { margin-top: 10px; transition: 0.3s ease-out; }

 @keyframes shake {
   0%{transform:translateX(0);} 25%{transform:translateX(-6px);} 50%{transform:translateX(6px);} 75%{transform:translateX(-4px);} 100%{transform:translateX(0);} }
 .shake { animation: shake 0.35s; }

 @keyframes pulse {
   0%{transform:scale(1);} 50%{transform:scale(1.3);} 100%{transform:scale(1);} }
 .pulse { animation: pulse 0.4s; }

 #message { margin-top: 25px; font-size: 24px; min-height: 28px; text-align:center; }

 #nextStageBox {
   position: fixed;
   top: 50%; left: 50%; transform: translate(-50%,-50%);
   background: rgba(255,255,255,0.1);
   padding: 30px;
   border-radius: 20px;
   border: 1px solid rgba(255,255,255,0.2);
   backdrop-filter: blur(8px);
   text-align:center;
   display:none;
 }
 .choice-btn {
   padding: 12px 25px;
   margin: 10px;
   border-radius: 15px;
   background: rgba(255,255,255,0.12);
   cursor:pointer;
   font-size:18px;
   border:1px solid rgba(255,255,255,0.25);
 }
 .choice-btn:hover { background: rgba(255,255,255,0.22); }
</style>
</head>
<body>
<h1>Ù…Ø±Ø­Ù„Ù‡ Û± â€” Ø¢Ø²Ù…Ø§ÛŒØ´ Ø¹Ø¶ÙˆÛŒØª Ø¯Ø± Ù…Ø¬Ù…ÙˆØ¹Ù‡</h1>

<div class="panel">
  <div>Ø§Ù…ØªÛŒØ§Ø²: <span id="score">0</span></div>
  <div>Ø®Ø·Ø§Ù‡Ø§: <span id="errors">0</span></div>
</div>

<div class="sets-container">
  <div class="set-box" data-set="A">A = { 1 , 3 , 5 }</div>
  <div class="set-box" data-set="B">B = { 3 , 4 , 5 }</div>
  <div class="set-box" data-set="C">C = { 2 , 5 , 6 }</div>
</div>

<div class="cards">
  <div class="card" draggable="true" data-value="2">Û²</div>
  <div class="card" draggable="true" data-value="5">Ûµ</div>
  <div class="card" draggable="true" data-value="1">Û±</div>
  <div class="card" draggable="true" data-value="3">Û³</div>
  <div class="card" draggable="true" data-value="4">Û´</div>
  <div class="card" draggable="true" data-value="6">Û¶</div>
  <div class="card" draggable="true" data-value="3">Û³</div>
  <div class="card" draggable="true" data-value="5">Ûµ</div>
</div>

<div id="message"></div>

<div id="nextStageBox">
  <h2>ğŸ‰ Ù…Ø±Ø­Ù„Ù‡ Û± Ú©Ø§Ù…Ù„ Ø´Ø¯!</h2>
  <p>Ø¢Ù…Ø§Ø¯Ù‡â€ŒØ§ÛŒ Ø¨Ø±Ø§ÛŒ Ù…Ø±Ø­Ù„Ù‡ Û²ØŸ</p>
  <button class="choice-btn" onclick="goNext(true)">Ø¨Ù„Ù‡ âœ”</button>
  <button class="choice-btn" onclick="goNext(false)">Ø®ÛŒØ± âœ–</button>
</div>

<script>
const sets = { A:[1,3,5], B:[3,4,5], C:[2,5,6] };
let score=0, errors=0, totalPlaced=0;

const scoreEl=document.getElementById("score");
const errorsEl=document.getElementById("errors");
const message=document.getElementById("message");

const cards=document.querySelectorAll('.card');
cards.forEach(card=>{
  card.addEventListener('dragstart',e=>{
    e.dataTransfer.setData("value",e.target.dataset.value);
  });
});

const boxes=document.querySelectorAll('.set-box');
boxes.forEach(box=>{
  box.addEventListener('dragover',e=>e.preventDefault());
  box.addEventListener('drop',e=>{
    e.preventDefault();
    const value=parseInt(e.dataTransfer.getData("value"));
    animateDrop(value,box);
  });
});

function animateDrop(value,box){
  const cardEl=document.querySelector(`.card[data-value='${value}']`);
  if(!cardEl) return;

  const rectStart=cardEl.getBoundingClientRect();
  const temp=document.createElement("div");
  temp.className="fly";
  temp.textContent=value;
  temp.style.left=rectStart.left+"px";
  temp.style.top=rectStart.top+"px";
  document.body.appendChild(temp);

  const rectTarget=box.getBoundingClientRect();
  temp.style.transform="scale(1.4)";

  setTimeout(()=>{
    temp.style.left=(rectTarget.left+rectTarget.width/2)+"px";
    temp.style.top=(rectTarget.top+rectTarget.height+5)+"px";
    temp.style.transform="scale(1)";
  },50);

  setTimeout(()=>{
    temp.remove();
    const real=document.createElement('div');
    real.className='card placed';
    real.textContent=value;
    real.style.background='rgba(255,255,255,0.18)';
    real.style.borderRadius='12px';
    box.appendChild(real);
    checkMembership(value,box);
  },450);
}

function checkMembership(value,box){
  const setName=box.dataset.set;

  if(sets[setName].includes(value)){
    score+=10;
    scoreEl.textContent=score;
    scoreEl.classList.add('pulse');
    setTimeout(()=>scoreEl.classList.remove('pulse'),400);

    message.textContent=`${setName} âˆˆ ${value} â€” Ø¹Ø§Ù„ÛŒ! Ø¹Ø¶Ùˆ Ø§ÛŒÙ† Ù…Ø¬Ù…ÙˆØ¹Ù‡ Ø§Ø³Øª âœ¨`;
    box.classList.add('glow-success');
    setTimeout(()=>box.classList.remove('glow-success'),400);
  }
  else{
    errors++;
    errorsEl.textContent=errors;
    errorsEl.classList.add('shake');
    setTimeout(()=>errorsEl.classList.remove('shake'),400);

    message.textContent=`${setName} âˆ‰ ${value} â€” Ø§ÛŒÙ† Ù…Ù‚Ø¯Ø§Ø± Ø¬Ø²Ùˆ Ø§ÛŒÙ† Ù…Ø¬Ù…ÙˆØ¹Ù‡ Ù†ÛŒØ³Øª âŒ`;
  }

  totalPlaced++;
  if(totalPlaced===8){ showNextStage(); }
}

function showNextStage(){
  document.getElementById("nextStageBox").style.display="block";
}

function goNext(yes){
  if(yes){ alert("Ù…Ø±Ø­Ù„Ù‡ Û² Ø´Ø±ÙˆØ¹ Ø´Ø¯ âœ”"); }
  else{
    const retry=confirm("Ù…ÛŒâ€ŒØ®ÙˆØ§ÛŒ Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ø§Ù…ØªØ­Ø§Ù† Ú©Ù†ÛŒØŸ");
    if(retry) location.reload();
  }
}
</script>

</body>
</html>
