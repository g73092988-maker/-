<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8" />
<title>Ù…Ø±Ø­Ù„Ù‡ Û± - Ø¹Ø¶ÙˆÛŒØª Ø¯Ø± Ù…Ø¬Ù…ÙˆØ¹Ù‡</title>
<style>
 body {
   font-family: "Vazirmatn", sans-serif;
   background: linear-gradient(180deg,#0b0f14,#0e141b,#0b0f14);
   color: #e6edf3;
   margin: 0;
   padding: 0;
   text-align:center;
 }
 h1 { margin-top: 25px; }

 /* Ú©Ø§Ø±Øª Ù‡Ù†Ú¯Ø§Ù… Ø¨Ø±Ø¯Ø§Ø´ØªÙ‡ Ø´Ø¯Ù† Ù…Ø­Ùˆ Ø´ÙˆØ¯ */
 .card.fadeOut { opacity:0; transform: translateY(-10px); transition:0.4s ease; }

 .cards { display:flex; gap:15px; flex-wrap:wrap; justify-content:center; margin-top:30px; }
 .card {
   background: rgba(255,255,255,0.12);
   border:1px solid rgba(255,255,255,0.18);
   padding:18px 28px;
   font-size:22px;
   border-radius:40px;
   cursor:grab;
   transition:0.25s;
   box-shadow:0 4px 12px rgba(0,0,0,0.4);
 }
 .card:hover { transform:scale(1.1); }

 .sets-container { display:flex; gap:18px; justify-content:center; margin-top:20px; }
 .set-box {
   background:rgba(255,255,255,0.07);
   padding:20px;
   border-radius:18px;
   min-width:180px;
   border:1px solid rgba(255,255,255,0.2);
   position:relative;
 }
 .set-box.glow-success { box-shadow:0 0 20px #2ecc71; transition:0.4s; }
 .set-box.shake { animation:shake .3s; }

 @keyframes shake {
   0%{transform:translateX(0);} 25%{transform:translateX(-6px);} 50%{transform:translateX(6px);} 75%{transform:translateX(-6px);} 100%{transform:translateX(0);} }

 #message { margin-top:25px; font-size:22px; min-height:28px; }

 .big-warning {
   position:fixed;
   top:50%; left:50%; transform:translate(-50%,-50%);
   background:rgba(0,0,0,0.7);
   padding:25px 45px;
   font-size:40px;
   border-radius:20px;
   display:none;
   box-shadow:0 0 20px rgba(255,0,0,0.6);
   animation:pop .3s;
 }
 @keyframes pop{0%{transform:scale(0.2);}100%{transform:scale(1);} }

 #nextStageBox {
   position:fixed;
   bottom:0; left:0; right:0;
   background:rgba(255,255,255,0.08);
   padding:25px;
   border-top:1px solid rgba(255,255,255,0.2);
   backdrop-filter:blur(5px);
   display:none;
 }
 .choice-btn { padding:12px 25px; margin:5px; border-radius:12px; background:rgba(255,255,255,0.15); border:1px solid rgba(255,255,255,0.25); cursor:pointer; }
 .choice-btn:hover { background:rgba(255,255,255,0.25); }

 #startScreen {
   position:fixed;
   inset:0;
   background:rgba(0,0,0,0.65);
   display:none;
   align-items:center;
   justify-content:center;
   font-size:60px;
   backdrop-filter:blur(4px);
 }
</style>
</head>
<body>
<h1>Ù…Ø±Ø­Ù„Ù‡ Û± â€” Ø¢Ø²Ù…Ø§ÛŒØ´ Ø¹Ø¶ÙˆÛŒØª</h1>

<div class="sets-container">
  <div class="set-box" data-set="A">A = { 1 , 3 , 5 }</div>
  <div class="set-box" data-set="B">B = { 3 , 4 , 5 }</div>
  <div class="set-box" data-set="C">C = { 2 , 5 , 6 }</div>
</div>

<div class="cards">
  <div class="card" draggable="true" data-value="1">Û±</div>
  <div class="card" draggable="true" data-value="2">Û²</div>
  <div class="card" draggable="true" data-value="3">Û³</div>
  <div class="card" draggable="true" data-value="3">Û³</div>
  <div class="card" draggable="true" data-value="4">Û´</div>
  <div class="card" draggable="true" data-value="5">Ûµ</div>
  <div class="card" draggable="true" data-value="5">Ûµ</div>
  <div class="card" draggable="true" data-value="5">Ûµ</div>
  <div class="card" draggable="true" data-value="6">Û¶</div>
</div>

<div id="message"></div>

<div class="big-warning" id="bigWarn"></div>

<div id="nextStageBox">
  <h2>ðŸŽ‰ Ù…Ø±Ø­Ù„Ù‡ Û± Ú©Ø§Ù…Ù„ Ø´Ø¯! Ø¢Ù…Ø§Ø¯Ù‡â€ŒØ§ÛŒØŸ</h2>
  <button class="choice-btn" onclick="goNext(true)">Ø¨Ù„Ù‡ âœ”</button>
  <button class="choice-btn" onclick="goNext(false)">Ø®ÛŒØ± âœ–</button>
</div>

<div id="startScreen">Ø¨Ø²Ù† Ø¨Ø±ÛŒÙ…! ðŸš€</div>

<script>
const sets={A:[1,3,5],B:[3,4,5],C:[2,5,6]};
let total=0;

function showWarn(msg){
  const w=document.getElementById("bigWarn");
  w.textContent=msg;
  w.style.display="block";
  setTimeout(()=>w.style.display="none",1200);
}

const cards=document.querySelectorAll('.card');
cards.forEach(c=>{
  c.addEventListener('dragstart',e=>{
    e.target.classList.add("fadeOut");
    setTimeout(()=>e.target.style.visibility="hidden",300);
    e.dataTransfer.setData("value",e.target.dataset.value);
    e.dataTransfer.setData("original",e.target.outerHTML);
  });
});

const boxes=document.querySelectorAll('.set-box');
boxes.forEach(b=>{
  b.addEventListener('dragover',e=>e.preventDefault());
  b.addEventListener('drop',e=>{
    e.preventDefault();
    dropToBox(parseInt(e.dataTransfer.getData("value")),b,e);
  });
});

function dropToBox(value,box,evt){
  const setName=box.dataset.set;
  const arr=Array.from(box.querySelectorAll('.placed')).map(x=>parseInt(x.dataset.value));

  if(arr.includes(value)){
    showWarn("Ø§ÛŒÙ† Ø¹Ø¶Ùˆ ØªÚ©Ø±Ø§Ø±ÛŒ Ø§Ø³Øª!");
    box.classList.add('shake');
    setTimeout(()=>box.classList.remove('shake'),400);
    resetCard(evt);
    return;
  }

  if(!sets[setName].includes(value)){
    showWarn("Ø¯Ù‚Øª Ú©Ù†! Ø§ÛŒÙ† Ø¹Ø¶Ùˆ Ø¯Ø§Ø®Ù„ Ø§ÛŒÙ† Ù…Ø¬Ù…ÙˆØ¹Ù‡ Ù†ÛŒØ³Øª");
    box.classList.add('shake');
    setTimeout(()=>box.classList.remove('shake'),400);
    resetCard(evt);
    return;
  }

  const placed=document.createElement("div");
  placed.textContent=value;
  placed.className="card placed";
  placed.dataset.value=value;
  placed.style.marginTop="10px";
  placed.style.opacity="0";
  box.appendChild(placed);

  setTimeout(()=>placed.style.opacity="1",40);

  message.textContent=`${value} âˆˆ ${setName} â€” Ø¹Ø§Ù„ÛŒ! Ø¹Ø¶Ùˆ Ù…Ø¬Ù…ÙˆØ¹Ù‡ Ø§Ø³Øª âœ¨`;
  box.classList.add('glow-success');
  setTimeout(()=>box.classList.remove('glow-success'),500);

  total++;
  if(total===9) document.getElementById("nextStageBox").style.display="block";
}

function resetCard(evt){
  const original=evt.dataTransfer.getData("original");
  const temp=document.createElement("div");
  temp.innerHTML=original;
  const card=temp.firstChild;
  card.classList.remove("fadeOut");
  document.querySelector('.cards').appendChild(card);
}

function goNext(yes){
  if(yes){
    document.getElementById("startScreen").style.display="flex";
    setTimeout(()=>{ document.getElementById("startScreen").style.opacity="0"; },1200);
  } else {
    const again=confirm("Ù…ÛŒØ®ÙˆØ§ÛŒ Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ø§Ù…ØªØ­Ø§Ù† Ú©Ù†ÛŒØŸ");
    if(again) location.reload();
  }
}
</script>
</body>
</html>
